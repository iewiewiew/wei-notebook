[TOC]

<h1 align="center">运维笔记</h1>

> By：weimenghua  
> Date：2022.08.17  
> Description：运维笔记



## ELK（日志分析系统）
ELK（Elasticsearch、Logstash、Kibana）
Elasticsearch 对格式化后的数据进行索引和存储；
Logstash 将日志进行集中化管理，将日志格式化并输出到 Elasticsearch；
Kibana 前端数据的展示。


## 两地三中心
一般的金融信息至少是两地三中心的系统。（一个城市设两个机房，在另一个城市设一个冷备机房）  
两地三中心指的是，在同城做两个数据中心，关系是热备份或者双活  
双活指的是，你炸了一个，还有一个。两个同时工作，几乎没有影响。  
热备份指的是，你炸了一个，我可以把服务切到另一个数据中心，也没啥影响。  

### 1、两地三中心
两地 = 本地 + 异地
三中心 = 本地数据中心 + 本地备份数据中心 + 导数数据备份中心
主备数据中心之间一般有热备、冷备、双活三种备份方式。

### 2、热备
热备的情况下，只有主数据中心承担用户的业务，此时备数据中心对主数据中心进行实时的备份，当主数据中心挂掉以后，备数据中心可以自动接管主数据中心的业务，用户的业务不会中断，所以也感觉不到数据中心的切换。

### 3、冷备
冷备的情况下，也是只有主数据中心承担业务，但是备用数据中心不会对主数据中心进行实时备份，这时可能是周期性的进行备份或者干脆不进行备份，如果主数据中心挂掉了，用户的业务就会中断。

### 4、双活
双活是觉得备用数据中心只做备份太浪费了，所以让主备两个数据中心都同时承担用户的业务，此时，主备两个数据中心互为备份，并且进行实时备份。一般来说，主数据中心的负载可能会多一些，比如分担60~70%的业务，备数据中心只分担40%~30%的业务 。


## HA (网站可用性)
在软件系统的高可靠性（也称为可用性，英文描述为 HA，High Available）里有个衡量其可靠性的标准——X 个9，这个 X是代表数字3~5。
X 个9表示在软件系统1年时间的使用过程中，系统可以正常使用时间与总时间（1年）之比。  
1. 1个9：(1-90%)*365=36.5天，表示该软件系统在连续运行1年时间里最多可能的业务中断时间是36.5天
2. 2个9：(1-99%)*365=3.65天 ， 表示该软件系统在连续运行1年时间里最多可能的业务中断时间是3.65天
3. 3个9：(1-99.9%)*365*24=8.76小时，表示该软件系统在连续运行1年时间里最多可能的业务中断时间是8.76小时
4. 4个9：(1-99.99%)*365*24=0.876小时=52.6分钟，表示该软件系统在连续运行1年时间里最多可能的业务中断时间是52.6分钟
5. 5个9：(1-99.999%)*365*24*60=5.26分钟，表示该软件系统在连续运行1年时间里最多可能的业务中断时间是5.26分钟
6. 6个9：(1-99.9999%)*365*24*60*60=31秒， 示该软件系统在连续运行1年时间里最多可能的业务中断时间是31秒              


## SLA (服务等级协)
SLA（Service-Level Agreement），也就是服务等级协议，指的是系统服务提供者（Provider）对客户（Customer）的一个服务承诺。这是衡量一个大型分布式系统是否“健康”的常见方法。
最常见的四个 SLA 指标，可用性、准确性、系统容量和延迟。  


## 分布式
分布式（distributed）是指在多台不同的服务器中部署不同的服务模块，通过远程调用协同工作，对外提供服务。


## 集群
集群（cluster）是指在多台不同的服务器中部署相同应用或服务模块，构成一个集群，通过负载均衡设备对外提供服务。